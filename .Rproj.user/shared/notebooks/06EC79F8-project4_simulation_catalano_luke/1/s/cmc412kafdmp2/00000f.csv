"0","# Build logical matrix from clean data"
"0","coffee_bool <- data.frame("
"0","  children = coffee_clean$number_children,"
"0","  gender = coffee_clean$gender,"
"0","  additions = coffee_clean$additions,"
"0","  wfh = coffee_clean$wfh,"
"0","  cups = coffee_clean$cups,"
"0","  know_source = coffee_clean$know_source"
"0",")"
"0",""
"0","# Conversion function: clean and binarize columns"
"0","conversion <- function(df, column, logic, val){"
"0","  if (logic == 'Equal') {"
"0","    df[[column]] <- ifelse(df[[column]] == val, 0, 1)"
"0","  }"
"0","  df[[column]] <- as.numeric(df[[column]])"
"0","  cat(""Success, the proportion of True is:"", mean(df[[column]]), ""\n"")"
"0","  return(df)"
"0","}"
"0",""
"0","# Apply binary transformations"
"0","coffee_bool <- conversion(coffee_bool, 'additions', 'Equal', 'No - just black')"
"1","Success, the proportion of True is: 0.4343434 
"
"0","coffee_bool <- conversion(coffee_bool, 'children', 'Equal', 'None')"
"1","Success, the proportion of True is: 0.2511785 
"
"0","coffee_bool <- conversion(coffee_bool, 'gender', 'Equal', 'Male')"
"1","Success, the proportion of True is: 0.2643098 
"
"0","coffee_bool <- conversion(coffee_bool, 'wfh', 'Equal', 'I primarily work from home')"
"1","Success, the proportion of True is: 0.5306397 
"
"0","coffee_bool <- conversion(coffee_bool, 'know_source', 'Equal', 'Yes')"
"1","Success, the proportion of True is: 0.2077441 
"
"0","# Process cups: convert to numeric before comparison"
"0","coffee_bool$cups[coffee_bool$cups == 'More than 4'] <- 5"
"2","G2;H2;Warningh in `[<-.factor`(`*tmp*`, coffee_bool$cups == ""More than 4"", value = 5) :
  invalid factor level, NA generatedg
"
"0","coffee_bool$cups[coffee_bool$cups == 'Less than 1'] <- 0"
"2","G2;H2;Warningh in `[<-.factor`(`*tmp*`, coffee_bool$cups == ""Less than 1"", value = 0) :
  invalid factor level, NA generatedg
"
"0","coffee_bool$cups <- as.numeric(coffee_bool$cups)"
"0","coffee_bool$cups <- ifelse(coffee_bool$cups >= 2, 1, 0)"
"0",""
"0","# logic"
"0","coffee_logical <- coffee_bool == 1"
"0",""
"0","# Run Proximus"
"0","model <- proximus(coffee_logical, max.radius = 2, min.size = 1, min.retry = 10, max.iter = 16, debug = FALSE)"
"0",""
"0","summary <- summary(model)"
"0",""
"0","summary$jsim "
"1","[1] 0.9714686
"
